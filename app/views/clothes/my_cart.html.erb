<div class="cart-page">
  <% if @cart.present? %>
    <div class="cart-header">
      <h1 class="cart-title">MON PANIER</h1>
      <span class="cart-count"><%= @cart.count %> article<%= @cart.count > 1 ? "s" : "" %></span>
    </div>

    <div class="cart-items">
      <% @cart.each do |clothe| %>
        <div class="cart-item">
          <div class="cart-item-image">
            <% if clothe.image.attached? %>
              <%= link_to clothe_path(clothe) do %>
                <%= image_tag url_for(clothe.image), alt: clothe.name %>
              <% end %>
            <% end %>
          </div>
          <div class="cart-item-details">
            <div class="cart-item-info">
              <%= link_to clothe.name, clothe_path(clothe), class: "cart-item-name" %>
              <span class="cart-item-size"><%= clothe.size %></span>
            </div>
            <p class="cart-item-price"><%= clothe.price / 100 %>&euro;</p>
          </div>
          <div class="cart-item-remove">
            <%= link_to remove_from_cart_path(clothe), class: "cart-remove-btn", data: { turbo_method: :delete, turbo_confirm: "Retirer cet article du panier ?" } do %>
              <i class="fa-solid fa-xmark"></i>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>

    <div class="cart-summary">
      <div class="cart-total">
        <span class="cart-total-label">TOTAL</span>
        <span class="cart-total-price"><%= @cart.sum(&:price) / 100 %>&euro;</span>
      </div>
      <div class="cart-checkout">
        <%= button_to "COMMANDER", clothe_checkout_path(@cart), class: "cart-checkout-btn", method: :post, data: { turbo: false } %>
      </div>
    </div>
  <% else %>
    <div class="cart-empty">
      <i class="fa-solid fa-bag-shopping cart-empty-icon"></i>
      <h1 class="cart-empty-title">VOTRE PANIER EST VIDE</h1>
      <p class="cart-empty-text">DÃ©couvrez notre collection et trouvez votre bonheur.</p>
      <%= link_to "VOIR LA COLLECTION", clothes_path, class: "cart-empty-btn" %>
    </div>
  <% end %>
</div>
